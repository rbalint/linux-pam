Index: Linux-PAM/defs/debian.defs
===================================================================
--- Linux-PAM/defs/debian.defs.orig
+++ Linux-PAM/defs/debian.defs
@@ -7,7 +7,7 @@
 # installed files on the system.
 ##
 
-CFLAGS	:= -O2 -I${shell pwd}/include # -D__NO_STRING_INLINES
+CFLAGS	:= -O2 -D_GNU_SOURCE -D_REENTRANT
 ifneq (,$(findstring $(DEB_BUILD_OPTIONS),debug DEBUG Debug))
   CFLAGS += -g
 endif
Index: Linux-PAM/libpam/include/security/pam_malloc.h
===================================================================
--- Linux-PAM/libpam/include/security/pam_malloc.h.orig
+++ Linux-PAM/libpam/include/security/pam_malloc.h
@@ -13,6 +13,10 @@
 #ifndef PAM_MALLOC_H
 #define PAM_MALLOC_H
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 /* these are the macro definitions for the stdlib.h memory functions */
 
 #define malloc(s)      pam_malloc(s,__FILE__,__FUNCTION__,__LINE__)
@@ -68,4 +72,8 @@
 extern int pam_malloc_flags;
 extern int pam_malloc_delay_length;      /* how long to pause on errors */
 
+#ifdef __cplusplus
+}
+#endif
+
 #endif /* PAM_MALLOC_H */
Index: Linux-PAM/libpam/include/security/pam_modules.h
===================================================================
--- Linux-PAM/libpam/include/security/pam_modules.h.orig
+++ Linux-PAM/libpam/include/security/pam_modules.h
@@ -8,6 +8,10 @@
 #ifndef _SECURITY_PAM_MODULES_H
 #define _SECURITY_PAM_MODULES_H
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 #include <security/_pam_types.h>      /* Linux-PAM common defined types */
 
 /* these defines are used by pam_set_item() and pam_get_item() and are
@@ -130,6 +134,10 @@
 /* take care of any compatibility issues */
 #include <security/_pam_compat.h>
 
+#ifdef __cplusplus
+}
+#endif
+
 /* Copyright (C) Theodore Ts'o, 1996.
  * Copyright (C) Andrew Morgan, 1996-8.
  *                                                All rights reserved.

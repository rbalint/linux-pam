Index: Linux-PAM/modules/pam_env/pam_env.c
===================================================================
--- Linux-PAM/modules/pam_env/pam_env.c.orig
+++ Linux-PAM/modules/pam_env/pam_env.c
@@ -13,7 +13,7 @@
 #endif
 
 #define DEFAULT_ETC_ENVFILE     "/etc/environment"
-#define DEFAULT_READ_ENVFILE    0
+#define DEFAULT_READ_ENVFILE    1
 
 #include <security/_pam_aconf.h>
 
@@ -217,7 +217,7 @@
 
     if ((conf = fopen(file,"r")) == NULL) {
       D(("Unable to open env file: %s", strerror(errno)));
-      return PAM_ABORT;
+      return PAM_IGNORE;
     }
 
     while (_assemble_line(conf, buffer, BUF_SIZE) > 0) {
@@ -766,8 +766,11 @@
 
   retval = _parse_config_file(pamh, ctrl, &conf_file);
 
-  if(readenv && retval == PAM_SUCCESS)
+  if(readenv && retval == PAM_SUCCESS) {
     retval = _parse_env_file(pamh, ctrl, &env_file);
+    if (retval == PAM_IGNORE)
+      retval = PAM_SUCCESS;
+  }
 
   /* indicate success or failure */
   
@@ -799,8 +802,11 @@
   
   retval = _parse_config_file(pamh, ctrl, &conf_file);
   
-  if(readenv && retval == PAM_SUCCESS)
+  if(readenv && retval == PAM_SUCCESS) {
     retval = _parse_env_file(pamh, ctrl, &env_file);
+    if (retval == PAM_IGNORE)
+      retval = PAM_SUCCESS;
+  }
 
   /* indicate success or failure */
   

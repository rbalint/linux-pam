diff -urN Linux-PAM-0.72.orig/doc/Makefile Linux-PAM-0.72/doc/Makefile
--- Linux-PAM-0.72.orig/doc/Makefile	Sun Nov 21 22:01:32 1999
+++ Linux-PAM-0.72/doc/Makefile	Wed Aug 30 15:47:49 2000
@@ -5,9 +5,9 @@
 HTMLER=sgml2html
 # older distributions use, sgml2ps
 # newer distributions than the one I use (AGM :^) need the following line:
-#PSER=sgml2latex -o ps
+PSER=sgml2latex -o ps -p letter
 # until I upgrade this is the default
-PSER=sgml2latex -p
+#PSER=sgml2latex -p
 
 FILES=pam pam_appl pam_modules
 FSRCS=pam.sgml pam_appl.sgml pam_modules.sgml
diff -urN Linux-PAM-0.72.orig/doc/man/pam_chauthtok.3 Linux-PAM-0.72/doc/man/pam_chauthtok.3
--- Linux-PAM-0.72.orig/doc/man/pam_chauthtok.3	Sun Jul 12 01:17:14 1998
+++ Linux-PAM-0.72/doc/man/pam_chauthtok.3	Wed Aug 30 15:57:43 2000
@@ -49,7 +49,7 @@
 - a valid new token was not obtained
 
 .br
-.BR PAM_AUTHTOK_RECOVERY_ERR
+.BR PAM_AUTHTOK_RECOVER_ERR
 - old authentication token was not available
 
 .br
diff -urN Linux-PAM-0.72.orig/doc/modules/pam_cracklib.sgml Linux-PAM-0.72/doc/modules/pam_cracklib.sgml
--- Linux-PAM-0.72.orig/doc/modules/pam_cracklib.sgml	Sun Jul  4 23:44:01 1999
+++ Linux-PAM-0.72/doc/modules/pam_cracklib.sgml	Wed Aug 30 15:47:51 2000
@@ -37,7 +37,7 @@
 <tag><bf>System dependencies:</bf></tag> 
 
 Requires the system library <tt/libcrack/ and a system dictionary:
-<tt>/usr/lib/cracklib_dict</tt>.
+<tt>/var/cache/cracklib/cracklib_dict</tt>.
 
 <tag><bf>Network aware:</bf></tag>
 
@@ -48,10 +48,6 @@
 <p>
 This module can be plugged into the <tt/password/ stack of a given
 application to provide some plug-in strength-checking for passwords.
-(XXX - note this does not necessarily work with the pam_unix module,
-although it is known to work with the pam_pwdb replacement for the
-unix module -- see example and pam_pwdb write up for more
-information).
 
 <p>
 This module works in the following manner: it first calls the
@@ -213,24 +209,20 @@
 
 <tag><bf>Examples/suggested usage:</bf></tag>
 
-(At the time of writing, this module can only be stacked before the
-<tt/pam_pwdb/ module. Cracklib strength checking may be compiled by
-default into the <tt/pam_unix/ module.)
-
 <p>
 For an example of the use of this module, we show how it may be
-stacked with the password component of <tt/pam_pwdb/:
+stacked with the password component of <tt/pam_unix/:
 <tscreen>
 <verb>
 #
 # These lines stack two password type modules. In this example the
 # user is given 3 opportunities to enter a strong password. The
-# "use_authtok" argument ensures that the pam_pwdb module does not
+# "use_authtok" argument ensures that the pam_unix module does not
 # prompt for a password, but instead uses the one provided by
 # pam_cracklib.
 #
 passwd	password required	pam_cracklib.so retry=3
-passwd	password required	pam_pwdb.so use_authtok
+passwd	password required	pam_unix.so use_authtok
 </verb>
 </tscreen>
 
@@ -248,7 +240,7 @@
 #
 password  required pam_cracklib.so \
                difok=3 minlen=15 dcredit= 2 ocredit=2
-password  required pam_pwdb.so use_authtok nullok md5
+password  required pam_unix.so use_authtok nullok md5
 </verb>
 </tscreen>
 
diff -urN Linux-PAM-0.72.orig/doc/modules/pam_pwdb.sgml Linux-PAM-0.72/doc/modules/pam_pwdb.sgml
--- Linux-PAM-0.72.orig/doc/modules/pam_pwdb.sgml	Sat Dec 26 23:36:23 1998
+++ Linux-PAM-0.72/doc/modules/pam_pwdb.sgml	Wed Dec 31 19:00:00 1969
@@ -1,252 +0,0 @@
-<!--
-   $Id: 003_doc,v 1.1 2001/04/29 04:22:26 hartmans Exp $
-   
-   This file was written by Andrew G. Morgan <morgan@linux.kernel.org>
--->
-
-<sect1>The Password-Database module
-
-<sect2>Synopsis
-
-<p>
-<descrip>
-
-<tag><bf>Module Name:</bf></tag>
-pam_pwdb
-
-<tag><bf>Author:</bf></tag>
-Cristian Gafton &lt;gafton@redhat.com&gt; <newline>
-and Andrew G. Morgan &lt;morgan@linux.kernel.org&gt;
-
-<tag><bf>Maintainer:</bf></tag>
-Authors.
-
-<tag><bf>Management groups provided:</bf></tag>
-account; authentication; password; session
-
-<tag><bf>Cryptographically sensitive:</bf></tag>
-	
-<tag><bf>Security rating:</bf></tag>
-
-<tag><bf>Clean code base:</bf></tag>
-
-<tag><bf>System dependencies:</bf></tag>
-Requires properly configured <tt/libpwdb/
-
-<tag><bf>Network aware:</bf></tag>
-
-</descrip>
-
-<sect2>Overview of module
-
-<p>
-This module is a pluggable replacement for the <tt/pam_unix_../
-modules. It uses the generic interface of the <em/Password Database/
-library
-<tt><htmlurl
-url="http://linux.kernel.org/morgan/libpwdb/index.html"
-name="http://linux.kernel.org/morgan/libpwdb/index.html"></tt>.
-
-<sect2>Account component
-
-<p>
-<descrip>
-
-<tag><bf>Recognized arguments:</bf></tag>
-<tt/debug/
-
-<tag><bf>Description:</bf></tag>
-
-The <tt/debug/ argument makes the accounting functions of this module
-<tt/syslog(3)/ more information on its actions. (Remaining arguments
-supported by the other functions of this module are silently ignored,
-but others are logged as errors through <tt/syslog(3)/).
-
-Based on the following <tt/pwdb_element/s:
-<tt/expire/;
-<tt/last_change/;
-<tt/max_change/;
-<tt/defer_change/;
-<tt/warn_change/,
-this module performs the task of establishing the status of the user's
-account and password. In the case of the latter, it may offer advice
-to the user on changing their password or, through the
-<tt/PAM_AUTHTOKEN_REQD/ return, delay giving service to the user until
-they have established a new password. The entries listed above are
-documented in the <em/Password Database Library Guide/ (see pointer
-above). Should the user's record not contain one or more of these
-entries, the corresponding <em/shadow/ check is not performed.
-
-<tag><bf>Examples/suggested usage:</bf></tag>
-
-In its accounting mode, this module can be inserted as follows:
-<tscreen>
-<verb>
-#
-# Ensure users account and password are still active
-#
-login	account	 required	pam_pwdb.so
-</verb>
-</tscreen>
-
-</descrip>
-
-<sect2>Authentication component
-
-<p>
-<descrip>
-
-<tag><bf>Recognized arguments:</bf></tag>
-<tt/debug/;
-<tt/use_first_pass/;
-<tt/try_first_pass/;
-<tt/nullok/;
-<tt/nodelay/;
-<tt/likeauth/
-
-<tag><bf>Description:</bf></tag>
-
-The <tt/debug/ argument makes the authentication functions of this
-module <tt/syslog(3)/ more information on its actions.
-
-<p>
-The default action of this module is to not permit the user access to
-a service if their <em/official/ password is blank. The <tt/nullok/
-argument overrides this default.
-
-<p>
-When given the argument <tt/try_first_pass/, before prompting the user
-for their password, the module first tries the previous stacked
-<tt/auth/-module's password in case that satisfies this module as
-well. The argument <tt/use_first_pass/ forces the module to use such a
-recalled password and will never prompt the user - if no password is
-available or the password is not appropriate, the user will be denied
-access.
-
-<p>
-The argument, <tt>nodelay</tt>, can be used to discourage the
-authentication component from requesting a delay should the
-authentication as a whole fail.  The default action is for the module
-to request a delay-on-failure of the order of one second.
-
-<p>
-Remaining arguments, supported by the other functions of this module,
-are silently ignored. Other arguments are logged as errors through
-<tt/syslog(3)/.
-
-<p>
-A helper binary, <tt>pwdb_chkpwd</tt>, is provided to check the user's
-password when it is stored in a read protected database.  This binary
-is very simple and will only check the password of the user invoking
-it.  It is called transparently on behalf of the user by the
-authenticating component of this module.  In this way it is possible
-for applications like <em>xlock</em> to work without being setuid-root.
-
-<p>
-The <tt>likeauth</tt> argument makes the module return the same value
-when called as a credential setting module and an authentication
-module.  This will help libpam take a sane path through the auth
-component of your configuration file.
-
-<tag><bf>Examples/suggested usage:</bf></tag>
-
-The correct functionality of this module is dictated by having an
-appropriate <tt>/etc/pwdb.conf</tt> file, the user
-databases specified there dictate the source of the authenticated
-user's record.
-
-</descrip>
-
-<sect2>Password component
-
-<p>
-<descrip>
-
-<tag><bf>Recognized arguments:</bf></tag>
-<tt/debug/; <tt/nullok/; <tt/not_set_pass/; <tt/use_authtok/;
-<tt/try_first_pass/; <tt/use_first_pass/; <tt/md5/; <tt/bigcrypt/;
-<tt/shadow/; <tt/radius/; <tt/unix/
-
-<tag><bf>Description:</bf></tag>
-
-This part of the <tt/pam_pwdb/ module performs the task of updating
-the user's password.  Thanks to the flexibility of <tt/libpwdb/ this
-module is able to move the user's password from one database to
-another, perhaps securing the user's database entry in a dynamic
-manner (<em/this is very ALPHA code at the moment!/) - this is the
-purpose of the <tt/shadow/, <tt/radius/ and <tt/unix/ arguments.
-
-<p>
-In the case of conventional unix databases (which store the password
-encrypted) the <tt/md5/ argument is used to do the encryption with the
-MD5 function as opposed to the <em/conventional/ <tt/crypt(3)/ call.
-As an alternative to this, the <tt/bigcrypt/ argument can be used to
-encrypt more than the first 8 characters of a password with DEC's
-(Digital Equipment Cooperation) `C2' extension to the standard UNIX
-<tt/crypt()/ algorithm.
-
-<p>
-The <tt/nullok/ module is used to permit the changing of a password
-<em/from/ an empty one. Without this argument, empty passwords are
-treated as account-locking ones.
-
-<p>
-The argument <tt/use_first_pass/ is used to lock the choice of old and
-new passwords to that dictated by the previously stacked <tt/password/
-module.  The <tt/try_first_pass/ argument is used to avoid the user
-having to re-enter an old password when <tt/pam_pwdb/ follows a module
-that possibly shared the user's old password - if this old password is
-not correct the user will be prompted for the correct one.  The
-argument <tt/use_authtok/ is used to <em/force/ this module to set the
-new password to the one provided by the previously stacked
-<tt/password/ module (this is used in an example of the stacking of
-the <em/Cracklib/ module documented above).
-
-<p>
-The <tt/not_set_pass/ argument is used to inform the module that it is
-not to pay attention to/make available the old or new passwords from/to
-other (stacked) password modules.
-
-<p>
-The <tt/debug/ argument makes the password functions of this module
-<tt/syslog(3)/ more information on its actions. Other arguments may be
-logged as erroneous to <tt/syslog(3)/.
-
-<tag><bf>Examples/suggested usage:</bf></tag>
-
-An example of the stacking of this module with respect to the
-pluggable password checking module, <tt/pam_cracklib/, is given in
-that modules section above.
-</descrip>
-
-<sect2>Session component
-
-<p>
-<descrip>
-
-<tag><bf>Recognized arguments:</bf></tag>
-
-<tag><bf>Description:</bf></tag>
-
-No arguments are recognized by this module component. Its action is
-simply to log the username and the service-type to
-<tt/syslog(3)/. Messages are logged at the beginning and end of the
-user's session.
-
-<tag><bf>Examples/suggested usage:</bf></tag>
-
-The use of the session modules is straightforward:
-<tscreen>
-<verb>
-#
-# pwdb - unix like session opening and closing
-#
-login	session	 required	pam_pwdb.so
-</verb>
-</tscreen>
-
-</descrip>
-
-<!--
-End of sgml insert for this module.
--->
diff -urN Linux-PAM-0.72.orig/doc/modules/pam_radius.sgml Linux-PAM-0.72/doc/modules/pam_radius.sgml
--- Linux-PAM-0.72.orig/doc/modules/pam_radius.sgml	Sun Jul 12 01:17:14 1998
+++ Linux-PAM-0.72/doc/modules/pam_radius.sgml	Wed Dec 31 19:00:00 1969
@@ -1,117 +0,0 @@
-<!--
-   $Id: 003_doc,v 1.1 2001/04/29 04:22:26 hartmans Exp $
-   
-   This file was written by Cristian Gafton <gafton@redhat.com>
--->
-
-<sect1>The RADIUS session module
-
-<sect2>Synopsis
-
-<p>
-<descrip>
-
-<tag><bf>Module Name:</bf></tag>
-<tt/pam_radius/
-
-<tag><bf>Author:</bf></tag>
-Cristian Gafton &lt;gafton@redhat.com&gt;
-
-<tag><bf>Maintainer:</bf></tag>
-Author.
-
-<tag><bf>Management groups provided:</bf></tag>
-session
-
-<tag><bf>Cryptographically sensitive:</bf></tag> 
-This module does not deal with passwords
-	
-<tag><bf>Security rating:</bf></tag>
-
-<tag><bf>Clean code base:</bf></tag>
-gcc reports 1 warning when compiling <tt>/usr/include/rpc/clnt.h</tt>.
-Hey, is not my fault !
-
-<tag><bf>System dependencies:</bf></tag>
-
-<tag><bf>Network aware:</bf></tag>
-
-yes; this is a network module (independent of application).
-
-</descrip>
-
-<sect2>Overview of module
-
-<p>
-This module is intended to provide the session service for users
-autheticated with a RADIUS server.  At the present stage, the only
-option supported is the use of the RADIUS server as an accounting
-server.
-
-<sect2>Session component
-
-<p>
-<descrip>
-
-<tag><bf>Recognized arguments:</bf></tag>
-
-<tt/debug/ - verbose logging to <tt/syslog(3)/.
-
-<tag><bf>Description:</bf></tag>
-
-This module is intended to provide the session service for users
-autheticated with a RADIUS server. At the present stage, the only
-option supported is the use of the RADIUS server as an <em/accounting/
-server.  
-
-<p>
-(There are few things which needs to be cleared out first in
-the PAM project until one will be able to use this module and expect
-it to magically start pppd in response to a RADIUS server command to
-use PPP for this user, or to initiate a telnet connection to another
-host, or to hang and call back the user using parameters provided in
-the RADIUS server response. Most of these things are better suited for
-the radius login application. I hope to make available Real Soon (tm)
-patches for the login apps to make it work this way.)
-
-<p>
-When opening a session, this module sends an ``Accounting-Start''
-message to the RADIUS server, which will log/update/whatever a
-database for this user. On close, an ``Accounting-Stop'' message is
-sent to the RADIUS server.
-
-<p>
-This module has no other prerequisites for making it work.  One can
-install a RADIUS server just for fun and use it as a centralized
-accounting server and forget about wtmp/last/sac etc. .
-
-<tag><bf>Examples/suggested usage:</bf></tag>
-
-For the services that need this module (<em/login/ for example) put
-the following line in <tt>/etc/pam.conf</tt> as the last line for that
-service (usually after the pam_unix session line):
-<tscreen>
-<verb>
-login	session	 required	pam_radius.so
-</verb>
-</tscreen>
-Replace <tt/login/ for each service you are using this module.
-
-<p>
-This module make extensive use of the API provided in libpwdb
-0.54preB or later. By default, it will read the radius server
-configuration (hostname and secret) from <tt>/etc/raddb/server</tt>.
-This is a default compiled into libpwdb, and curently there is no way to
-modify this default without recompiling libpwdb. I am working on
-extending the radius support from libpwdb to provide a possibility
-to make this runtime-configurable.
-
-Also please note that libpwdb will require also the RADIUS
-dictionary to be present (<tt>/etc/raddb/dictionary</tt>).
-
-</descrip>
-
-<!--
-End of sgml insert for this module.
--->
-
diff -urN Linux-PAM-0.72.orig/doc/modules/pam_userdb.sgml Linux-PAM-0.72/doc/modules/pam_userdb.sgml
--- Linux-PAM-0.72.orig/doc/modules/pam_userdb.sgml	Sun Aug  1 11:54:28 1999
+++ Linux-PAM-0.72/doc/modules/pam_userdb.sgml	Wed Aug 30 15:47:51 2000
@@ -59,7 +59,7 @@
 so caution must be exercised over the access rights to the DB database itself..
 
 The module will read the password from the user using the conversation mechanism. If
-you are using this module on top of another authetication module (like <tt/pam_pwdb/;)
+you are using this module on top of another authetication module (like <tt/pam_unix/;)
 then you should tell that module to read the entered password from the PAM_AUTHTOK field, which is set by this module.
 
 <p>
@@ -98,10 +98,10 @@
 #%PAM-1.0
 auth       required     pam_listfile.so item=user sense=deny file=/etc/ftpusers onerr=succeed
 auth       sufficient   pam_userdb.so icase db=/tmp/dbtest
-auth       required     pam_pwdb.so shadow nullok try_first_pass
+auth       required     pam_unix.so shadow nullok try_first_pass
 auth       required     pam_shells.so
-account    required     pam_pwdb.so
-session    required     pam_pwdb.so
+account    required     pam_unix.so
+session    required     pam_unix.so
 </verb>
 </tscreen>
 
diff -urN Linux-PAM-0.72.orig/doc/modules/pam_wheel.sgml Linux-PAM-0.72/doc/modules/pam_wheel.sgml
--- Linux-PAM-0.72.orig/doc/modules/pam_wheel.sgml	Wed Aug 30 15:47:33 2000
+++ Linux-PAM-0.72/doc/modules/pam_wheel.sgml	Wed Aug 30 15:50:57 2000
@@ -31,7 +31,6 @@
 <tag><bf>Clean code base:</bf></tag>
 
 <tag><bf>System dependencies:</bf></tag>
-Requires libpwdb.
 
 <tag><bf>Network aware:</bf></tag>
 
@@ -111,6 +110,11 @@
 </tscreen>
 
 </descrip>
+
+<bf>NOTE</bf>: In this context, being a member of a group means that the
+user is listed as a member in the /etc/groups file. The pam-wheel module
+does not check the users primary group (the one listed in their
+/etc/passwd entry).
 
 <!--
 End of sgml insert for this module.
diff -urN Linux-PAM-0.72.orig/doc/pam_appl.sgml Linux-PAM-0.72/doc/pam_appl.sgml
--- Linux-PAM-0.72.orig/doc/pam_appl.sgml	Mon Nov  8 00:09:17 1999
+++ Linux-PAM-0.72/doc/pam_appl.sgml	Wed Aug 30 15:57:33 2000
@@ -658,7 +658,7 @@
 <tag><tt/PAM_AUTHTOK_ERR/</tag>
 	A module was unable to obtain the new authentication token.
 	
-<tag><tt/PAM_AUTHTOK_RECOVERY_ERR/</tag>
+<tag><tt/PAM_AUTHTOK_RECOVER_ERR/</tag>
 	A module was unable to obtain the old authentication token.
 
 <tag><tt/PAM_AUTHTOK_LOCK_BUSY/</tag>
diff -urN Linux-PAM-0.72.orig/doc/pam_modules.sgml Linux-PAM-0.72/doc/pam_modules.sgml
--- Linux-PAM-0.72.orig/doc/pam_modules.sgml	Mon Nov  8 00:09:17 1999
+++ Linux-PAM-0.72/doc/pam_modules.sgml	Wed Aug 30 15:57:38 2000
@@ -905,7 +905,7 @@
 <tag><tt/PAM_AUTHTOK_ERR/</tag>
 	The module was unable to obtain the new authentication token.
 	
-<tag><tt/PAM_AUTHTOK_RECOVERY_ERR/</tag>
+<tag><tt/PAM_AUTHTOK_RECOVER_ERR/</tag>
 	The module was unable to obtain the old authentication token.
 
 <tag><tt/PAM_AUTHTOK_LOCK_BUSY/</tag>
diff -urN Linux-PAM-0.72.orig/doc/pam_source.sgml Linux-PAM-0.72/doc/pam_source.sgml
--- Linux-PAM-0.72.orig/doc/pam_source.sgml	Mon Nov  8 00:09:17 1999
+++ Linux-PAM-0.72/doc/pam_source.sgml	Wed Aug 30 15:47:49 2000
@@ -314,7 +314,7 @@
 the program is named "pamprog" and the name of the configuration file
 is /etc/pam.d/pamprog.
 
-In the /etc/pam.d/pamprog but the following two lines:
+In the /etc/pam.d/pamprog put the following two lines:
 
 auth    required  pam_permit.so
 auth    required  pam_warn.so
@@ -504,9 +504,10 @@
 <tt/no_module_data/; <tt/conv_err/; <tt/authtok_err/;
 <tt/authtok_recover_err/; <tt/authtok_lock_busy/;
 <tt/authtok_disable_aging/; <tt/try_again/; <tt/ignore/; <tt/abort/;
-<tt/authtok_expired/; <tt/module_unknown/; <tt/bad_item/; and
-<tt/default/.  The last of these (<tt/default/) can be used to set the
-action for those return values that are not explicitly defined.
+<tt/authtok_expired/; <tt/module_unknown/; <tt/bad_item/; <tt/conv_again/;
+<tt/incomplete/; and <tt/default/. The last of these (<tt/default/) can
+be used to set the action for those return values that are not explicitly
+defined.
 
 <p>
 The <tt/actionI/ can be a positive integer or one of the following
@@ -868,6 +869,11 @@
 and set about correcting things from there.  The following has been
 <em>adapted</em> from a life-saving email on the subject from David
 Wood:
+<p><em/NOTE:/ The following assumes that booting to single-user mode does
+not prompt for a password. However, on Debian and other distributions,
+this is not true. Init will instead start <tt/sulogin/, which asks for the
+root password. The program <tt/sulogin/ does not use PAM, so a broken PAM
+setup will not break this program.
 <verb>
 > What the hell do I do now?
 
--- Linux-PAM-0.72/doc/pam_source.sgml~	Sun Dec 31 04:45:19 2000
+++ Linux-PAM-0.72/doc/pam_source.sgml	Sun Dec 31 04:46:07 2000
@@ -322,12 +322,11 @@
 
 Now try to use pamprog.  The first line in the configuration file 
 says that all users are permitted.  The second line will write a
-warning to your syslog file (or whether you syslog is writing
-
-messages).  If this test succeeds, then you know that you have
-a program that can understand pam, and you can start the more
+warning to your syslog file (depending on whether your syslog is
+writing messages).  If this test succeeds, then you know that you
+have a program that can understand pam, and you can start the more
 interesting work of deciding how to stack modules in your
-/etc/pam.d/pamprog  file.
+/etc/pam.d/pamprog file.
 </verb>
 </tscreen>
 

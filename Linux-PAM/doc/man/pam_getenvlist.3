.\"     Title: pam_getenvlist
.\"    Author: 
.\" Generator: DocBook XSL Stylesheets v1.70.1 <http://docbook.sf.net/>
.\"      Date: 06/27/2006
.\"    Manual: Linux\-PAM Manual
.\"    Source: Linux\-PAM Manual
.\"
.TH "PAM_GETENVLIST" "3" "06/27/2006" "Linux\-PAM Manual" "Linux\-PAM Manual"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "NAME"
pam_getenvlist \- getting the PAM environment
.SH "SYNOPSIS"
.sp
.ft B
.nf
#include <security/pam_appl.h>
.fi
.ft
.HP 22
.BI "char **pam_getenvlist(pam_handle_t\ *" "pamh" ");"
.SH "DESCRIPTION"
.PP
The
\fBpam_getenvlist\fR
function returns a complete copy of the PAM environment as associated with the handle
\fIpamh\fR. The PAM environment variables represent the contents of the regular environment variables of the authenticated user when service is granted.
.PP
The format of the memory is a malloc()'d array of char pointers, the last element of which is set to NULL. Each of the non\-NULL entries in this array point to a NUL terminated and malloc()'d char string of the form: "\fIname=value\fR".
.PP
It should be noted that this memory will never be free()'d by libpam. Once obtained by a call to
\fBpam_getenvlist\fR, it is the responsibility of the calling application to free() this memory.
.PP
It is by design, and not a coincidence, that the format and contents of the returned array matches that required for the third argument of the
\fBexecle\fR(3)
function call.
.SH "RETURN VALUES"
.PP
The
\fBpam_getenvlist\fR
function returns NULL on failure.
.SH "SEE ALSO"
.PP

\fBpam_start\fR(3),
\fBpam_getenv\fR(3),
\fBpam_putenv\fR(3),
\fBpam\fR(8)
